<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Moviepoint - Online Movie,Vedio and TV Show HTML Template</title>
  <!-- Favicon Icon -->
  <link rel="icon" type="image/png" href="/assets/img/favcion.png"/>
  <!-- Bootstrap CSS -->
  <link rel="stylesheet" type="text/css" href="/assets/css/bootstrap.min.css" media="all"/>
  <!-- Slick nav CSS -->
  <link rel="stylesheet" type="text/css" href="/assets/css/slicknav.min.css" media="all"/>
  <!-- Iconfont CSS -->
  <link rel="stylesheet" type="text/css" href="/assets/css/icofont.css" media="all"/>
  <!-- Owl carousel CSS -->
  <link rel="stylesheet" type="text/css" href="/assets/css/owl.carousel.css">
  <!-- Popup CSS -->
  <link rel="stylesheet" type="text/css" href="/assets/css/magnific-popup.css">
  <!-- Main style CSS -->
  <link rel="stylesheet" type="text/css" href="/assets/css/style.css" media="all"/>
  <!-- Responsive CSS -->
  <link rel="stylesheet" type="text/css" href="/assets/css/responsive.css" media="all"/>
  <link href="/assets/css/style.css" rel="stylesheet"/>
  <link href="/assets/css/profile.css" rel="stylesheet"/>
  <!--[if lt IE 9]>
  <script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
  <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.1/css/all.min.css"
        integrity="sha512-1gds9wphWrkW8tXeZg8i+voHVfSkQSla18kqZfc4yZ4Yxv4DfDEaV8oGbzg5iFHpHJBUm2Wv8da/h3Z6c0efcA=="
        crossorigin="anonymous"/>
  <![endif]-->
  <style>
        .page-item.active .page-link {
        z-index: 1;
        color: #fff;
        background-color: #eb315a;

        }
        .pagination > .active > a, .pagination > .active > span, .pagination > .active > a:hover{
            z-index: 1;
            color: #fff;
            background-color: #eb315a;
        }

    </style>
</head>
<body>
<th:block th:replace="layout :: header"></th:block>
<div class="popup-container">
  <div class="popup-box">
    <h1>Member Ranking</h1>
    <div class="text-right">
      <div style="font-size: 15px; color: #000; margin: 5px; font-weight: 500;">1 ticket = 10 points</div>
    </div>
    <table class="content-table">
      <thead>
      <tr>
        <th>Rank</th>
        <th>Points</th>
      </tr>
      </thead>
      <tbody>
      <tr>
        <td>Iron</td>
        <td>From 0 to 90</td>
      </tr>
      <tr>
        <td>Bronze</td>
        <td>From 100 to 190</td>
      </tr>
      <tr>
        <td>Silver</td>
        <td>From 200 to 290</td>
      </tr>
      <tr>
        <td>Gold</td>
        <td>From 300 to 390</td>
      </tr>
      <tr>
        <td>Plantium</td>
        <td>From 400 to 490</td>
      </tr>
      <tr>
        <td>Diamond</td>
        <td>From 500 or more</td>
      </tr>
      </tbody>
    </table>
    <button class="close-btn">OK</button>
  </div>
</div>
<section class="breadcrumb-area">
  <section class="transformers-area">
    <div class="container">
      <div class="transformers-box">
        <div class="">
          <div class="wrapper bg-white d-sm-flex" style="width: unset">
            <div class="profile-tab-nav border-right">
              <div class="p-4">
                <div class="text-right">
                  <input id="UserId" th:value="${UserID}" style="display:none;"> </input>
                  <div class="accumulate-points"></div>
                </div>
                <div class="img-circle text-center mb-3">
                  <img src="https://cdn-icons-png.flaticon.com/512/3177/3177440.png" alt="Image"
                       class="shadow">
                </div>

                <div style="font-size:18px;" class="mt-3 text-center ">
                  <span class="rankName"></span>
                  <svg xmlns="http://www.w3.org/2000/svg" width="13" height="13" fill="currentColor"
                       class="bi bi-question-circle show-popup-ranked" viewBox="0 0 16 16">
                    <path d="M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14m0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16"/>
                    <path d="M5.255 5.786a.237.237 0 0 0 .241.247h.825c.138 0 .248-.113.266-.25.09-.656.54-1.134 1.342-1.134.686 0 1.314.343 1.314 1.168 0 .635-.374.927-.965 1.371-.673.489-1.206 1.06-1.168 1.987l.003.217a.25.25 0 0 0 .25.246h.811a.25.25 0 0 0 .25-.25v-.105c0-.718.273-.927 1.01-1.486.609-.463 1.244-.977 1.244-2.056 0-1.511-1.276-2.241-2.673-2.241-1.267 0-2.655.59-2.75 2.286zm1.557 5.763c0 .533.425.927 1.01.927.609 0 1.028-.394 1.028-.927 0-.552-.42-.94-1.029-.94-.584 0-1.009.388-1.009.94"/>
                  </svg>
                </div>
              </div>
              <div style="font-weight: 500; color: white;" class="nav flex-column nav-pills"
                   id="v-pills-tab" role="tablist" aria-orientation="vertical">
                <a class="nav-link active" id="account-tab" data-toggle="pill" href="#account"
                   role="tab" aria-controls="account" aria-selected="true">
                  <i class="fa fa-home text-center mr-1"></i>
                  Account
                </a>
                <a class="nav-link" id="password-tab" data-toggle="pill" href="#password" role="tab"
                   aria-controls="password" aria-selected="false">
                  <i class="fa fa-key text-center mr-1"></i>
                  Password
                </a>
                <a class="nav-link" id="invoice-tab" data-toggle="pill" href="#invoice" role="tab"
                   aria-controls="invoice" aria-selected="false">
                  <i class="fa uil uil-invoice text-center mr-1"></i>
                  Invoice
                </a>
              </div>
            </div>
            <div class="tab-content p-4 p-md-5" id="v-pills-tabContent">
              <form th:action="@{/account}" method="post" class="tab-pane fade show active" id="account"
                    role="tabpanel" aria-labelledby="account-tab">
                <div class="row" th:each="user : ${user}">
                  <div class="col-xl-12">
                    <div class="form-group">
                      <label>Username</label>
                      <input type="text" class="form-control" th:field="${user.username}"
                             th:value="${user.username}" id="username" name="username">
                    </div>
                  </div>
                  <div class="col-xl-12">
                    <div class="form-group">
                      <label>Email</label>
                      <input type="text" class="form-control" th:field="${user.Email}"
                             th:value="${user.Email}" id="Email" name="Email">
                    </div>
                  </div>
                  <div class="col-xl-12">
                    <div class="form-group">
                      <label>Name</label>
                      <input type="text" class="form-control" th:field="${user.fullName}"
                             th:value="${user.fullName}" id="fullName" name="fullName">
                    </div>
                  </div>
                  <div class="col-md-6" style="display: none;">
                    <div class="form-group">
                      <label>Password</label>
                      <input type="text" class="form-control" th:value="${user.Password}"
                             name="Password">
                    </div>
                  </div>

                  <div class="col-md-6" style="display: none;">
                    <div class="form-group">
                      <label>Password</label>
                      <input type="text" class="form-control" th:value="${user.userId}"
                             name="userId">
                    </div>
                  </div>
                </div>
                <div>
                  <button class="theme-btn" type="submit">Save</button>
                </div>
              </form>
              <form th:action="@{/account/changepassword}" method="post" class="tab-pane fade"
                    id="password" role="tabpanel" aria-labelledby="password-tab">
                <div class="row" th:each="user : ${user}">
                  <div class="col-xl-12">
                    <div class="form-group" style="display: none">
                      <label>Old password</label>
                      <input type="text" class="form-control" th:value="${user.userId}"
                             name="userId" style="display: none">
                      <input type="text" class="form-control" th:field="${user.fullName}"
                             th:value="${user.fullName}" name="fullName" style="display: none">
                      <input type="text" class="form-control" th:field="${user.Email}"
                             th:value="${user.Email}" name="Email" style="display: none">
                      <input type="text" class="form-control" th:field="${user.username}"
                             th:value="${user.username}" name="username" style="display: none">
                      <input type="password" class="form-control" th:value="${user.Password}">
                    </div>
                  </div>
                </div>
                <div class="row">
                  <div class="col-xl-12">
                    <div class="form-group">
                      <label>New password</label>
                      <input type="password" class="form-control" name="Password">
                    </div>
                  </div>
                  <div class="col-xl-12">
                    <div class="form-group">
                      <label>Confirm password</label>
                      <input type="password" class="form-control">
                    </div>
                  </div>
                </div>
                <div>
                  <button class="theme-btn" type="submit" id="ok">Save</button>
                </div>
              </form>
              <form class="tab-pane fade" id="invoice" role="tabpanel" aria-labelledby="invoice-tab">
                <div class="row">
                  <table class="table">
                    <thead>
                    <tr>
                      <th>Id</th>
                      <th>Date Purchased</th>
                      <th>Movie</th>
                      <th>Time</th>
                      <th>Day</th>
                      <th>Seats</th>
                      <th>Total</th>
                    </tr>
                    </thead>
                    <tbody id="invoice-data-body">
                    <!-- Dữ liệu hóa đơn sẽ được thêm vào đây khi bạn nhấn vào tab "Invoice" -->
                    <tr th:each="reservation : ${reservations}">
                      <td th:text="${reservation.invoiceId}"></td>
                      <td th:text="${reservation.createdAt}"></td>
                      <td th:text="${reservation.movie}"></td>
                      <td th:text="${reservation.time}"></td>
                      <td th:text="${reservation.day}"></td>
                      <td th:text="${reservation.seat}"></td>
                      <td th:text="${reservation.total}"></td>
                    </tr>
                    </tbody>
                  </table>
                </div>
              </form>
            </div>
          </div>

        </div>
      </div>
    </div>
  </section>

</section>

<th:block th:replace="layout :: footer"></th:block>
<!-- jquery main JS -->
<script src="/assets/js/jquery.min.js"></script>
<!-- Bootstrap JS -->
<script src="/assets/js/bootstrap.min.js"></script>
<!-- Slick nav JS -->
<script src="/assets/js/jquery.slicknav.min.js"></script>
<!-- owl carousel JS -->
<script src="/assets/js/owl.carousel.min.js"></script>
<!-- Popup JS -->
<script src="/assets/js/jquery.magnific-popup.min.js"></script>
<!-- Isotope JS -->
<script src="/assets/js/isotope.pkgd.min.js"></script>
<!-- main JS -->
<script src="/assets/js/main.js"></script>
<script th:inline="javascript">
    $(document).ready(function () {
       var userId = $('#UserId').val();
       var url = 'http://localhost:8080/api/v1/account/' + userId;
       console.log(userId);
       $.ajax({
          url: url,
          type: 'GET',
          dataType: 'json',
          success: function (data) {
              //console.log(data);
              console.log(data.rankName);
              //let trHTML = '';
              //trHTML = trHTML  + data.rewardPoints + ' points';
              //$('#accumulate-points').append(trHTML);
              $('.accumulate-points').text(data.rewardPoints + ' points');
              $('.rankName').text(data.rankName);
          }
        });
    });
</script>
<script th:inline="javascript">
    $(document).ready(function () {
      $('#ok').click(function(){
        alert('Change password successfully!')
      })
       $.ajax({
          url: 'http://localhost:8080/api/v1/invoice',
          type: 'GET',
          dataType: 'json',
          success: function (data) {
              let trHTML = '';
              $.each(data, function (i, item) {
              //console.log(i);
              //console.log(item);
                  trHTML = trHTML + '<tr>'+
                                  '<td>' + item.Id + '</td>'+
                                  '<td>' + item.createdAt + '</td>'+
                                   '<td>' + item.movieName + '</td>'+
                                  '<td>' + item.quantity + '</td>'+
                                   '<td>' + item.seats + '</td>'+
                                  '<td>' + item.total + '</td>'+
                                  '<td class=" text-right">'+
                                     '<a href="/admin/invoice/edit/'+item.id+'"  class="btn bg-warning mr-2">' + 'Edit' + '</a>' +
                                     '<a onclick="apiDeleteInvoice(' + item.id +');" id="btn-delete" class="btn bg-danger mr-2">' +'Delete'+'</a>'+
                                  '</td>' +

                             '</tr>';

              });
              $('#invoice-table-body').append(trHTML);
          }
        });
    });
</script>
<script th:inline="javascript">
    const showPopup = document.querySelector('.show-popup-ranked');
    const popupContainer = document.querySelector('.popup-container');
    const closeBtn = document.querySelector('.close-btn');
    showPopup.onclick = () => {
      popupContainer.classList.add('active');
    }
    closeBtn.onclick = () => {
      popupContainer.classList.remove('active');
    }
</script>
</body>
</html>